<div class="container-fluid ">
  <div>
    <app-menu></app-menu>
  </div>
  <div class="row  " style="margin-top:1%">
    <div class="col-6 text-center">
      <div class="row">
        <div class="col-3"></div>
        <div class="col-7" style="padding:4%">
          <img src="../../assets/output-onlinepngtools (2).png" style="width: 100%; height: 100%;">
        </div>
      </div>


    </div>
    <div class="col-6 divhed"></div>


  </div>
  

  <div class="row bod cont " style="padding-top:2%">
    <div class="col-lg-6 col-md-6 col-sm-10 col-10 align-item-center justify-content-center ">
      <div *ngIf="mode==1" class="col-lg-9 col-md-9 col-sm-9 col-9 pub " style="padding:2%; margin-left: 10%">
        <div class="row text-center align-items-center justify-content-center" style="margin-top: 0%; padding-top: 0%;">
          <p class="h4 mb-4" style="font-size: 1.2rem; color:#4d79ff">Demandez à vos voisins</p>

          <p style="font-size: 1rem; color:#4d79ff">Partagez objets et service et élargir votre réseaux de
            connaissances.</p>
        </div>
        <hr>
        <!-- Default form subscription -->
        <div>

          <h6 class="text-left" style=" color:rgb(51, 181, 229);">
            1-Vous demandez:
          </h6>

          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" style="height:17px; width:17px;" checked [(ngModel)]="modelprop"
              name="prop" id="objet" value="objet">
            <label class="form-check-label" for="inlineRadio1"> <span style="font-size:1.2rem">Un Objet</span></label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" style="height:17px; width:17px;" [(ngModel)]="modelprop" name="prop"
              id="service" value="service">
            <label class="form-check-label" for="inlineRadio2"><span style="font-size:1.2rem">Un service</span></label>
          </div>

          <h6 class="text-left" style="margin-top: 3%; color:rgb(51, 181, 229);"> 2- Expliquer ce que vous demandez à
            vos
            voisins: </h6>
          <div class="form-group blue-border-focus  shadow-textarea">

            <textarea class="form-control" id="exampleFormControlTextarea5" rows="2" [(ngModel)]="supply.description"
              placeholder="Ex: J'ai besoin empreinter une visseuse-perseuse pour une durée d'une demi journée "></textarea>
          </div>

          <h6 *ngIf="modelprop === 'objet'" class="text-left" style="margin-top: 3%; color:rgb(51, 181, 229);">3-
            Choissisez la catégorie de l'objet: </h6>
          <!-- -->
          <div *ngIf="modelprop === 'objet'" class="row">

            <div class="form-group col-md-12">
              <label for="inputState">Catégorie</label>
              <select id="inputState" class="form-control" [(ngModel)]="objet.catObjet">
                <option label="--Choisir catégorie --"></option>
                <option label="--Choisir catégorie --"></option>
                <option value="Ouitillage et travaux">Outillage et travaux</option>
                <option value="Matériel de jardin">Matériel de jardin</option>
                <option value="Maison et confort">Maison et confort</option>
                <option value="Evénement, Réception & Fête">Evénement, Réception & Fête</option>
                <option value="High Tech">High Tech</option>
                <option value="Fournitures de bureau">Fournitures de bureau</option>
                <option value="Loisirs">Loisirs</option>
                <option value="Livres, Magazines & BD">Livres, Magazines & BD </option>
                <option value="Mode & Accessoires Adulte">Mode & Accessoires Adulte</option>
                <option value="Mode Enfant, Bébé & Puériculture">Mode Enfant, Bébé & Puériculture</option>
                <option value="Bien-être & Bagagerie">Bien-être & Bagagerie</option>
                <option value="Transport & Accessoires Auto , Moto & Bateau">Transport & Accessoires Auto , Moto &
                  Bateau</option>
                <option value="Immobilier">Immobilier</option>
              </select>
            </div>


            <div class="form-group col-md-12">

              <select id="input" class="form-control" [(ngModel)]="objet.modeExpl">
                <option selected value="Location">Location</option>

                <option value="Vente">Vente</option>
                <option value="Don Gratuit">Don gratuit</option>
              </select>
            </div>

          </div>

          <div *ngIf="modelprop === 'objet'" class="form-row justify-content-around">
            <div class="col-sm-6 my-1">

              <div class="input-group mb-1">

                <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Durée" [(ngModel)]="objet.dureeExpl">
                <div class="input-group-prepend">
                  <div class="input-group-text">jour(s)</div>
                </div>
              </div>
            </div>
            <div class="col-sm-6 my-1">
              <label class="sr-only" for="inlineFormInputGroup"></label>
              <div class="input-group mb-1">

                <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Budget" [(ngModel)]="objet.productPrice">
                <div class="input-group-prepend">
                  <div class="input-group-text">DT</div>
                </div>
              </div>
            </div>
          </div>
          <!-- Affichage service-->
          <h6 *ngIf="modelprop === 'service'" class="text-left" style="margin-top: 3%; color:rgb(51, 181, 229);">3-
            Choissisez la catégorie du service: </h6>
          <div *ngIf="modelprop === 'service'" class="row row justify-content-around">

            <div class="form-group col-md-12">
              <label for="inputState">Catégorie</label>
              <select id="categoriesService" class="form-control" [(ngModel)]="service.catService">
                <option label="--Choisir catégorie --"></option>
                <option value="Bricolage - Travaux">Bricolage - Travaux</option>
                <option value="Jardinage - Piscine">Jardinage - Piscine</option>
                <option value="Déménagement - Manutention">Déménagement - Manutention</option>
                <option value="Dépannage - Réparation de matériel">Dépannage - Réparation de matériel</option>
                <option value="Entretien - Réparation véhicules">Entretien - Réparation véhicules</option>
                <option value="Services véhiculés">Services véhiculés</option>
                <option value="Services à la personne">Services à la personne</option>
                <option value="Enfants">Enfants</option>
                <option value="Animaux">Animaux</option>
                <option value="Informatique et web">Informatique et web</option>
                <option value="Photographie - Vidéo">Photographie - Vidéo</option>
                <option value="Animation - Evénements">Animation - Evénements</option>
                <option value="Cours - Formations">Cours - Formations</option>
                <option value="Administratif - Bureautique">Administratif - Bureautique</option>
                <option value="Mode - Santé - Bien être">Mode - Santé - Bien être</option>
                <option value="Restauration - Réception">Restauration - Réception</option>


              </select>
            </div>
            <div class="row  justify-content-around">
              <div class="col-8">
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Type de facturation</label>
                  <select class="form-control" id="TypeFacturation" [(ngModel)]="service.typeFacturation">
                    <option value="Budget à l'heure" selected>Budget à l'heure</option>
                    <option value="Budget par jour">Budget par jour </option>
                    <option value="Budget globale">Budget globale</option>
                    <option value="Sur devis">Sur devis</option>
                    <option value="Budget non rémunéré">Budget non rémunéré</option>
                  </select>
                </div>

              </div>
              <div class="col-4">
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Prix</label>
                  <div class="input-group mb-1">

                    <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Budget" [(ngModel)]="supply.budget">
                    <div class="input-group-prepend">
                      <div class="input-group-text">DT</div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>


          <!-- Affichage service-->



          <h6 class="text-left" style="margin-top: 3%; color:rgb(51, 181, 229);"> 4- Où situez vous?: </h6>
          <input type="text" class="form-control mb-4" name="adresse" placeholder="Précisez une adresse" [(ngModel)]="userAdresse">
          <div class="row align-items-center justify-content-center">
            <button class="btn btn-success btn-block" style="width: 50%;" (click)="search()">Demandez à vos voisins</button>
          </div>

        </div>
        <!-- Default form subscription -->
      </div>

      <!-- Display Result-->
      <div *ngIf="mode==2" class="col-lg-11 col-md-11 col-sm-11 col-11 " style="padding:2%;">
        <h3>Ce que vos Voisins ont pour vous:</h3>

        <div *ngFor="let pub of searchData; let i = index" class="pub" style="margin-top: 2%;  background-color: white">
          <div *ngIf="objet.modeExpl === pub.product.modeExpl || !objet.modeExpl">
            <div class="row justify-content-between" style="padding-top:2%">
              <div class="col-6 ">

                <p style="color:grey; font-size: 0.8rem; margin-left: 1%"><strong>Date de publication: {{pub.datePub}}</strong></p>

              </div>
              <div class="col-4"> <span class="badge badge-pill  badge-info" style="font-size: 1rem;">
                  <span *ngIf="pub.product.modeExpl=='Location' ">{{pub.product.modeExpl}}: </span>
                  <span *ngIf="pub.product.modeExpl=='Location' ">{{pub.product.productPrice}} DT/jour </span>

                  <span *ngIf="pub.product.modeExpl=='Vente' ">{{pub.product.modeExpl}}: </span>
                  <span *ngIf="pub.product.modeExpl=='Vente' ">{{pub.product.productPrice}} DT </span>
                  <span *ngIf="pub.product.modeExpl=='Don Gratuit'"> Gratuit</span>
                </span>
              </div>
            </div>
            <div class="row justify-content-around" style="padding-top:2%">
              <div class="col-3">
                <img [src]="offreImage[i]" (error)="onError2(i)" style="width: 150px; height: 100px;" class=" rounded mx-auto d-block"
                  alt="profil">
              </div>
              <div class="col-8">
                <h5 style="color:gray"> <a (click)="goToUser(pub.simpleUser)" value="user" class="clickable">
                    {{pub.simpleUser.userName}} {{pub.simpleUser.userLastName}} </a></h5>
                <h3 style="margin-top:2%;margin-bottom: 2%; color: #3399ff">{{pub.nomPublication}}</h3>
                <p>{{pub.description}}</p>

                <!-- Modal-->

                <!-- Button trigger modal -->
                <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#exampleModal"
                  (click)="afficher(i,pub.id)">
                  Faire une propostion
                </button>

                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Faite une proposition au voisin</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <textarea *ngIf="error==1" class="form-control " id="propostion" rows="2" placeholder="Ecrire votre proposition ici"
                          [(ngModel)]="application.proposition" required></textarea>
                        <h5 *ngIf="error==500"> Vous avez déja posté un commentaire pour cette publication</h5>
                        <h5 *ngIf="error==404" style="color:#cc0000"> Vous devez vous connectez avant pour faire une
                          propostion</h5>
                        <h5 *ngIf="error==2" style="color:green; font-size: 1.2rem"> Votre de proposition a été envoyé</h5>
                      </div>
                      <div class="modal-footer align-items-center align-content-center">
                        <button *ngIf="error==1" type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Annuler</button>
                        <button *ngIf="error==1" type="button" class="btn btn-primary btn-sm" (click)="proposer()">Envoyer</button>
                        <button *ngIf="error==404" type="button" class="btn btn-success" data-dismiss="modal" (click)="navigate('/sign')">Se
                          connectez</button>
                        <button *ngIf="error==404" type="button" class="btn  btn-success " data-dismiss="modal" (click)="navigate('/register')">créez
                          un compte</button>
                        <button *ngIf="error==2" type="button" class="btn  btn-success " data-dismiss="modal">Fermer</button>
                      </div>
                    </div>
                  </div>
                </div>



              </div>
            </div>
            <div class="row justify-content-around">

            </div>
            <hr>
            <span style="color: grey; font-size: 1rem; margin-left:2%; margin-right: 2%"><i class="fas fa-map-marker-alt"></i>
              {{pub.simpleUser.userAdresse.street}} {{pub.simpleUser.userAdresse.city}}</span>
            <span style="color: grey; font-size: 1rem"><i class="fas fa-comments"></i>
              Réponses et propositions</span>

            <span style="color: grey; font-size: 1rem; margin-left:2%; margin-right: 2%"><i class="fas fa-clock"></i>
              Valable jusqu'à:</span>
          </div>


          <hr>
        </div>
      </div>
    </div>

    <!-- Display Result-->

    <div class="col-lg-6 col-md-6 col-sm-11 col-11">


      <div id="map"></div>

    </div>
  </div>
</div>